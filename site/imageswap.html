<!doctype html><html lang='en' id='imghigh'><head><meta charset='utf-8'><meta name='description' content='An ongoing collection of notes for my projects and interests'/><meta name='viewport' content='width=device-width,initial-scale=1'><link rel='alternate' type='application/rss+xml' title='RSS Feed' href='../feed.xml' /><link rel='stylesheet' type='text/css' href='../links/main.css?c=20210721'><title>Ten Digits &mdash; imageswap</title><link rel='shortcut icon' type='image/png' href='/favicon.ico'></head><body id='imglow'><nav class='sitenav'><a href='index.html' title='Home'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 575 575'><path d='M68 183c0 49.7 40.3 90 90 90m-90-90c49.7 0 90 40.3 90 90m0-135c0 74.6 33.6 135 75 135m-75-135c41.4 0 75 60.4 75 135m30-165c-20 60-10 110 30 150m-30-150c30 30 40 80 30 150m105-135c-40 30-60 75-60 135m60-135c10 60-10 105-60 135m165-120c-50 20-85 65-105 135m105-135c-10 60-45 105-105 135m90 45c-60 20-100 50-120 90m120-90c-10 50-50 80-120 90m-15-90c-20 30-35 70-45 120m45-120c10 50-5 90-45 120m-30-150c-30 50-35 105-15 165m15-165c10 60 5 115-15 165m-75-150c30 50 40 95 30 135m-30-135c-20 50-10 95 30 135M98 318c0 60 20 100 60 120M98 318c40 20 60 60 60 120' fill='#333' stroke='#333' stroke-width='18' stroke-linecap='round' stroke-linejoin='round'/></svg></a><a href='index.html#notes'>Notes</a><a href='../feed.xml' title='Syndication feed'>RSS</a><button class='js-imgswap' title='Toggle between low and high resolution images on page' aria-label='Toggle between low and high resolution images on page'>+ Pixels</button></nav><div class='wrap'><header>	<p class="pretitle">Low res by default</p>	<h1>Image Swap</h1>	<p class="posttitle">Now with better accessibility</p></header><main>	<p>On this page, there used to be a no-js solution to image swapping that used <code class="language-css">:target</code> in CSS selectors, but it turns out there was a negative accessibility impact to that solution. This new method requires some JS, but it's kept to a minimum.</p>		<h3>Example</h3>	<p>Click the "+ Pixels" button at the top right of the page to try it out</p>	<img class="img low" 	 src="../assets/img/birdhouse1-low.png" 	 data-hisrc="../assets/img/birdhouse1.jpg" 	 data-lowsrc="../assets/img/birdhouse1-low.png" alt="Mother and Father Bluebirds, inspecting nest" loading="lazy" width="400" height="300">					<h3>The HTML for an image</h3>	<pre class="language-html"><code class="language-html">&lt;img class=&quot;img low&quot; src=&quot;../assets/img/myimage-low.png&quot; 		data-hisrc=&quot;../assets/img/myimage.jpg&quot; 		data-lowsrc=&quot;../assets/img/myimage-low.png&quot; 		alt=&quot;A description of my image&quot; loading=&quot;lazy&quot; width=&quot;400&quot; height=&quot;300&quot;&gt;</code></pre>		<h3>The HTML for the button</h3>		<pre class="language-html"><code class="language-html">&lt;button class=&quot;js-imgswap&quot; title=&quot;Toggle between low and high resolution images on page&quot; aria-label=&quot;Toggle between low and high resolution images on page&quot;&gt;+ Pixels&lt;/button&gt;</code></pre>		<h3>The CSS</h3>	<pre class="language-css"><code class="language-css">.low &#123;		  image-rendering: crisp-edges;		  width:800px;		&#125;		.img &#123;		  max-width:800px;		  height:auto;		&#125;		.js-imgswap &#123;		  display:none;		&#125;		.js-imgswap.util--show &#123;		  display:block;		&#125;</code></pre>		<h3>The JS</h3>	<pre class="language-css"><code class="language-js">var isb = document.querySelector(&#39;.js-imgswap&#39;);		var isi = document.querySelectorAll(&#39;.low&#39;);		if(isi.length &gt; 0)&#123;		  isb.classList.add(&#39;util--show&#39;);    		&#125;		var goSwap = function(el, h)&#123;		  el.setAttribute(&#39;src&#39;, h ? el.dataset.hisrc : el.dataset.lowsrc);		  el.setAttribute(&#39;width&#39;, h ? el.width*2 : el.width/2);		  el.setAttribute(&#39;height&#39;, h ? el.height*2 :el.height/2);		  el.classList.toggle(&#39;low&#39;);		  isb.innerText = h ? &#39;- Pixels&#39; : &#39;+ Pixels&#39;;		&#125;		isb.onclick = function()&#123;		  for (var i = 0; i &lt; isi.length; i++) &#123;			isi[i].classList.contains(&#39;low&#39;) ? goSwap(isi[i], true) : goSwap(isi[i], false);		  &#125;		&#125;</code></pre>		<h3>Description</h3>	<p>The script looks through the page for any images with the class "low", and if found, reveals a button on the page and attaches the image swapping function to it. The function swaps out the source, and doubles the width/height.</p>	<p>The half size low-res image does two things: it greatly reduces the file size, and shows the pixels better (when enlarged by CSS). By using "image-rendering: crisp-edges;" in the CSS, the enlarged pixels are kept sharp.</p>	</main>
</div><footer><p><em>Edited on Thu Aug 12 12:16:54 2021
 <a href='https://github.com/tendigits/10d/edit/master/src/inc/imageswap.htm'>[edit]</a><br/></em>Ten Digits © 2021 — <a href='https://creativecommons.org/licenses/by-nc/4.0/legalcode.txt'>CC BY-NC 4.0</a><br><a href='https://webring.xxiivv.com/#random'><svg fill='none' stroke-linecap='square' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 300' stroke='#000' stroke-width='20' height='14' width='14'><path d='M201.962 210a60 60 0 10-103.924-60l-50 86.603'></path><path d='M98.038 210a60 60 0 10103.924-60l-50-86.603'></path><path d='M150 120a60 60 0 100 120h100'></path></svg> Find more handcrafted sites in the webring</a></p></footer><script src='../links/main.js'></script></body></html>